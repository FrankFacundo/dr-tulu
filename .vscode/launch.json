{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Launch Chat (macOS CPU)",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/agent/scripts/launch_chat.py",
      "cwd": "${workspaceFolder}/agent",
      "console": "integratedTerminal",
      "justMyCode": false,
      "args": [
        "--model",
        "rl-research/DR-Tulu-8B",
        "--vllm-max-model-len",
        "40960",
        "--vllm-max-num-batched-tokens",
        "40960",
        "--vllm-startup-timeout",
        "600"
      ],
      "env": {
        "PYTHONUNBUFFERED": "1",
        "VLLM_CPU_KVCACHE_SPACE": "8",
        "HF_HUB_DOWNLOAD_TIMEOUT": "60"
      }
    },
    {
      "name": "Launch Chat (Linux CUDA)",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/agent/scripts/launch_chat.py",
      "cwd": "${workspaceFolder}/agent",
      "console": "integratedTerminal",
      "justMyCode": false,
      "args": [
        "--model",
        "rl-research/DR-Tulu-8B",
        "--vllm-max-model-len",
        "40960",
        "--vllm-max-num-batched-tokens",
        "40960"
      ],
      "env": {
        "PYTHONUNBUFFERED": "1",
        "CUDA_VISIBLE_DEVICES": "0"
      }
    },
    {
      "name": "Train DR Tulu Mini Base (mac)",
      "type": "node-terminal",
      "request": "launch",
      "command": "bash train_dr_tulu_mini_base_mac.sh",
      "cwd": "${workspaceFolder}/rl/open-instruct",
      "env": {
        "PYTHONUNBUFFERED": "1"
      }
    },
    {
      "name": "Debug GRPO Fast (mac, python)",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/rl/open-instruct/open_instruct/grpo_fast.py",
      "python": "${workspaceFolder}/rl/open-instruct/.venv/bin/python",
      "cwd": "${workspaceFolder}/rl/open-instruct",
      "console": "integratedTerminal",
      "justMyCode": false,
      "subProcess": true,
      "env": {
        "PYTHONUNBUFFERED": "1",
        "PYTORCH_ENABLE_MPS_FALLBACK": "1"
      },
      "args": [
        "--exp_name",
        "dr-tulu-mini-base-mac",
        "--training_backend",
        "torch",
        "--rollout_backend",
        "hf",
        "--device",
        "mps",
        "--num_learners_per_node",
        "1",
        "--single_gpu_mode",
        "True",
        "--num_samples_per_prompt_rollout",
        "2",
        "--num_unique_prompts_rollout",
        "4",
        "--num_mini_batches",
        "1",
        "--num_epochs",
        "1",
        "--learning_rate",
        "1e-6",
        "--per_device_train_batch_size",
        "1",
        "--output_dir",
        "output",
        "--kl_estimator",
        "kl3",
        "--dataset_mixer_list",
        "rl-research/dr-tulu-rl-data",
        "1.0",
        "--dataset_mixer_list_splits",
        "train",
        "--dataset_mixer_eval_list",
        "rl-research/dr-tulu-rl-data",
        "16",
        "--dataset_mixer_eval_list_splits",
        "train",
        "--max_token_length",
        "2048",
        "--max_prompt_token_length",
        "512",
        "--response_length",
        "512",
        "--pack_length",
        "1024",
        "--model_name_or_path",
        "Qwen/Qwen3-0.6B",
        "--total_episodes",
        "128",
        "--lr_scheduler_type",
        "constant",
        "--apply_verifiable_reward",
        "true",
        "--seed",
        "1",
        "--num_evals",
        "4",
        "--save_freq",
        "-1",
        "--try_launch_beaker_eval_jobs_on_weka",
        "False"
      ]
    },
    {
      "name": "Train Open-Instruct2 (mac + local vLLM)",
      "type": "python",
      "request": "launch",
      "module": "open_instruct2.train_grpo",
      "cwd": "${workspaceFolder}/rl/open-instruct2",
      "console": "integratedTerminal",
      "justMyCode": false,
      "env": {
        "PYTHONUNBUFFERED": "1"
      },
      "args": [
        "--runtime_target",
        "mac",
        "--reference_mode",
        "launch_local_vllm",
        "--reference_launch_host",
        "127.0.0.1",
        "--reference_launch_port",
        "8000",
        "--reference_api_key",
        "local-dev-key",
        "--reference_launch_dtype",
        "float16",
        "--model_name_or_path",
        "Qwen/Qwen3-0.6B",
        "--dataset_mixer_list",
        "ai2-adapt-dev/rlvr_gsm8k_zs",
        "1.0",
        "--dataset_mixer_list_splits",
        "train",
        "--total_episodes",
        "128"
      ]
    },
    {
      "name": "Train Open-Instruct2 (mac + local vLLM + memory profile)",
      "type": "python",
      "request": "launch",
      "module": "open_instruct2.train_grpo",
      "cwd": "${workspaceFolder}/rl/open-instruct2",
      "console": "integratedTerminal",
      "justMyCode": false,
      "env": {
        "PYTHONUNBUFFERED": "1"
      },
      "args": [
        "--runtime_target",
        "mac",
        "--reference_mode",
        "launch_local_vllm",
        "--reference_launch_host",
        "127.0.0.1",
        "--reference_launch_port",
        "8000",
        "--reference_api_key",
        "local-dev-key",
        "--reference_launch_dtype",
        "float16",
        "--model_name_or_path",
        "Qwen/Qwen3-0.6B",
        "--dataset_mixer_list",
        "ai2-adapt-dev/rlvr_gsm8k_zs",
        "1.0",
        "--dataset_mixer_list_splits",
        "train",
        "--total_episodes",
        "128",
        "--enable_memory_profile",
        "true",
        "--memory_profile_interval_s",
        "1.0",
        "--memory_profile_mark_steps",
        "true",
        "--memory_profile_step_interval",
        "1"
      ]
    }
  ]
}
